CREATE DATABASE `db_autella_local` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;

CREATE TABLE `db_autella_local`.`field` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE `db_autella_local`.`discipline` (
  `id` int NOT NULL AUTO_INCREMENT,
  `id_field` int NOT NULL,
  `name` varchar(64) NOT NULL,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`id_field`) REFERENCES `field`(id)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `db_autella_local`.`institution` (
  `id` int NOT NULL AUTO_INCREMENT,
  `full_name` varchar(64) NOT NULL,
  `abbreviation` varchar(64) NOT NULL,
  `phone` varchar(64) NOT NULL,
  `cep` varchar(64) NOT NULL,
  `email` varchar(64) NOT NULL,
  `number` varchar(64) NOT NULL,
  `street` varchar(64) NOT NULL,
  `neighborhood` varchar(64) NOT NULL,
  `city` varchar(64) NOT NULL,
  `state` varchar(64) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `db_autella_local`.`role` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `db_autella_local`.`user` (
  `id` int NOT NULL AUTO_INCREMENT,
  `email` varchar(64) NOT NULL,
  `name` varchar(64) NOT NULL,
  `password` varchar(64) NOT NULL,
  `id_discipline` int,
  `id_role` int NOT NULL,
  `id_institution` int,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`id_discipline`) REFERENCES `discipline`(id),
  FOREIGN KEY (`id_role`) REFERENCES `role`(id),
  FOREIGN KEY (`id_institution`) REFERENCES `institution`(id)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `db_autella_local`.`subject`(
	`id` INT NOT NULL AUTO_INCREMENT,
  `id_discipline` INT NOT NULL,
  `name` varchar(64) NOT NULL,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`id_discipline`) REFERENCES `discipline`(`id`)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `db_autella_local`.`question`(
	`id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE,
  `id_user` INT,
  `id_subject` INT,
  `dificulty` INT,
  `enunciate` TEXT,
  `correctAnswer` varchar(64),
  `status` INT, 
  PRIMARY KEY (`id`),
  FOREIGN KEY (`id_user`) REFERENCES `user`(`id`),
  FOREIGN KEY (`id_subject`) REFERENCES `subject`(`id`)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

Create table `db_autella_local`.`Tests`(
	`id` int NOT NULL AUTO_INCREMENT,
	`id_user` int NOT NULL,
	`making_date` DATE,
	`changing_date` DATE,
	 `name` varchar(256),
	 `status` int,
	  PRIMARY KEY (`id`),
	  FOREIGN KEY (`id_user`) REFERENCES `user`(`id`)
	) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

	Create table `db_autella_local`.`question_test`(
	`id_tests` int NOT NULL ,
	`id_question` int NOT NULL,
	FOREIGN KEY (`id_tests`) REFERENCES `tests`(`id`),
	FOREIGN KEY (`id_question`) REFERENCES `question`(`id`)
	);